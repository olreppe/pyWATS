<UserControl x:Class="Virinco.WATS.Client.Configurator.Pages.LabViewToolkitView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:res="clr-namespace:Virinco.WATS.Client.Configurator.Resources"
             xmlns:converter="clr-namespace:Virinco.WATS.Client.Configurator.Helpers"
             xmlns:vm="clr-namespace:Virinco.WATS.Client.Configurator.ViewModel"             
             mc:Ignorable="d" 
             d:DesignHeight="250" d:DesignWidth="426"             
             >

    <UserControl.Resources>
        <converter:BoolToVisibilityConverter x:Key="btvc" />
        <converter:NumberToVisibilityConverter x:Key="ntvc" />
    </UserControl.Resources>
    <StackPanel >
        <TextBlock Margin="3" Text="{x:Static res:Strings.Cfg_TDM_LV_Heading}" Style="{StaticResource ConfigPageHeader}" />
        <TextBlock Text="{x:Static res:Strings.Cfg_TDM_LV_Description}" TextWrapping="Wrap" Style="{StaticResource ConfigDescription}" Margin="3,0,30,0" />


        <ListView ItemsSource="{Binding  LabViews}" Margin="3,3,3,3" BorderThickness="0" Background="#282828">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <WrapPanel Margin="3">
                        <TextBlock Text="{Binding Path=ProductName, Mode=OneWay}" Width="143" Margin="0,4,0,0" Style="{StaticResource SectionLabel}"/>
                        <Border Margin="1" BorderThickness="1" BorderBrush="Black">
                            <StackPanel Orientation="Horizontal">
                                <WrapPanel Background="#0BAA00" Visibility="{Binding Path=Deployed, Converter={StaticResource btvc}}">
                                    <TextBlock Text="{x:Static res:Strings.Cfg_TDM_TS_Configured}" HorizontalAlignment="Center" VerticalAlignment="Center" Width="125" Margin="2,3,2,2" Foreground="#FFD6D7D8"/>
                                </WrapPanel>
                                <WrapPanel Background="#DB0000" Visibility="{Binding Path=Deployed, Converter={StaticResource btvc},ConverterParameter=Inverse}">
                                    <TextBlock Text="{x:Static res:Strings.Cfg_TDM_TS_UnConfigured}" HorizontalAlignment="Center" VerticalAlignment="Center" Width="125" Margin="2,3,2,2" Foreground="#FFD6D7D8"/>
                                </WrapPanel>
                            </StackPanel>
                        </Border>
                        <Button Content="Install" Visibility="{Binding Path=Deployed, Converter={StaticResource btvc},ConverterParameter=Inverse}" Width="80" Margin="5,0,0,0" Click="btnInstall_Click" />
                        <Button Content="ReInstall" Visibility="{Binding Path=Deployed, Converter={StaticResource btvc}}" Width="80" Margin="5,0,0,0" Click="btnInstall_Click" />
                        <Button Content="Uninstall" IsEnabled="{Binding Path=Deployed}" Width="80" Margin="5,0,0,0" Click="btnUninstall_Click" />
                    </WrapPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Grid Visibility="{Binding Path=LabViews.Count, Converter={StaticResource ntvc}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="34"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Image Source="sign_warning.png" Stretch="Fill" Width="24" Height="24" Margin="5,5"/>
            <TextBlock Text="{x:Static res:Strings.Cfg_TDM_LV_NotFound}" TextWrapping="Wrap" Style="{StaticResource WarningDescription}" Margin="3,3,30,0" Grid.Column="1" />
        </Grid>
    </StackPanel>
</UserControl>
