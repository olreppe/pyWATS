<UserControl x:Class="Virinco.WATS.Client.Configurator.Pages.TDMView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:res="clr-namespace:Virinco.WATS.Client.Configurator.Resources"
             xmlns:hlprs="clr-namespace:Virinco.WATS.Client.Configurator.Helpers"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="350" >
    <UserControl.Resources>
        <hlprs:InverseBooleanConverter x:Key="inversebool" />
    </UserControl.Resources>
    <DockPanel LastChildFill="True">
        <TextBlock DockPanel.Dock="Top" Margin="3" Text="{x:Static res:Strings.Cfg_TDM_TDM_Heading}" Style="{StaticResource ConfigPageHeader}" />
        <ScrollViewer DockPanel.Dock="Bottom" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="3,0,30,0">
                <Grid DataContext="{Binding Config}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="10" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="32" />
                        <RowDefinition Height="5" />
                        <RowDefinition Height="10*" />
                        <RowDefinition Height="20" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Text="{x:Static res:Strings.Cfg_TDM_TDM_adr_Name}" Style="{StaticResource SectionLabel}" />
                    <TextBox Grid.Row="0" Height="32" Grid.Column="2" Name="textBoxServiceAddress" Text="{Binding Path=ServiceAddress, UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" />
                    <Button Grid.Row="2" Grid.Column="2" Content="{x:Static res:Strings.Cfg_TDM_TDM_disconnect_BText}" Click="ConfirmDisconnect" HorizontalAlignment="Left" Width="100" />
                    <TextBlock Grid.Row="4" Grid.Column="2" Text="{x:Static res:Strings.Cfg_TDM_TDM_adr_Description}" TextWrapping="Wrap" Style="{StaticResource ConfigDescription}" />
                    <TextBlock Grid.Row="6" Grid.Column="0" Text="{x:Static res:Strings.Cfg_TDM_TDM_tst_Name}" VerticalAlignment="Center" Style="{StaticResource SectionLabel}" />
                    <Button Grid.Row="6" Grid.Column="2" Content="{x:Static res:Strings.Cfg_TDM_TDM_tst_BText}" Click="TestConnection" HorizontalAlignment="Left" Width="80" />
                </Grid>
                <Grid Margin="0,40,0,10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="20" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="20" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200" />
                        <ColumnDefinition Width="10" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="WATS Client Status" Style="{StaticResource SectionLabel}" />
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="WATS Client Service" Style="{StaticResource SectionLabel}" />
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Current Identifier" Style="{StaticResource SectionLabel}" />

                    <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding ServiceAPIStatus}" HorizontalAlignment="Left" Style="{StaticResource SectionLabel}" Foreground="#eee"/>
                    <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding ServiceStatus}" HorizontalAlignment="Left" Style="{StaticResource SectionLabel}" Foreground="#eee"/>
                    <TextBlock Grid.Row="4" Grid.Column="2" Text="{Binding CurrentIdentifier}" HorizontalAlignment="Left" Style="{StaticResource SectionLabel}" Foreground="#eee"/>

                </Grid>
                <Expander Header="{x:Static res:Strings.Cfg_AdvOptText}" Margin="0,15,0,0">
                    <StackPanel Orientation="Vertical">
                        <Grid Margin="5,20,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="15" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="15" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="10" />
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="10" />
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="Auto"  />
                            </Grid.RowDefinitions>

                            <TextBlock  Grid.Row="0" Grid.Column="0" Text="{x:Static res:Strings.Cfg_TDM_TDM_Compression_Name}" Style="{StaticResource SectionLabel}" />
                            <CheckBox VerticalAlignment="Top" Grid.Row="0" Grid.Column="2" IsChecked="{Binding Config.CompressionEnabled}" Style="{StaticResource CheckBoxStyle}"/>
                            <TextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" Text="{x:Static res:Strings.Cfg_TDM_TDM_Compression_Description}" TextWrapping="Wrap" Style="{StaticResource ConfigDescription}" />

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="{x:Static res:Strings.Cfg_MES_MES_enabled}" Style="{StaticResource SectionLabel}" />
                            <CheckBox VerticalAlignment="Top" Grid.Row="3" Grid.Column="2" IsChecked="{Binding Config.MESActivated}" Checked="CheckboxMesEnabled_Checked" Style="{StaticResource CheckBoxStyle}"/>
                            <StackPanel Grid.Row="3" Grid.RowSpan="2" Grid.Column="4">
                                <TextBlock Text="{Binding Config.MinimumRequiredServerVersionForMES, StringFormat={x:Static res:Strings.Cfg_MES_minver}}" TextWrapping="Wrap" Style="{StaticResource ConfigDescription}" />
                                <TextBlock Text="{Binding Config.ServerVersion, StringFormat={x:Static res:Strings.Cfg_MES_srvver}}" TextWrapping="Wrap" Style="{StaticResource ConfigDescription}" />
                            </StackPanel>

                            <TextBlock  Grid.Row="6" Grid.Column="0" Text="Use custom identifier" Style="{StaticResource SectionLabel}" />
                            <CheckBox VerticalAlignment="Top" Grid.Row="6" Grid.Column="2" IsChecked="{Binding Config.UseCustomIdentifier}" Style="{StaticResource CheckBoxStyle}"/>
                            <TextBlock Grid.Row="6" Grid.RowSpan="2" Grid.Column="4" TextWrapping="Wrap" Text="Use a custom identifier instead of the MAC Address of the IP Interface. Take care to use a unique identifier for each WATS Client." Style="{StaticResource ConfigDescription}" />
                        </Grid>

                        <Grid Margin="5,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="5" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="5"  />
                                <RowDefinition Height="Auto"  />
                                <RowDefinition Height="Auto"  />
                            </Grid.RowDefinitions>

                            <TextBox Height="28" Grid.Row="0" Grid.Column="0" Text="{Binding Config.CustomIdentifier}" IsEnabled="{Binding Config.UseCustomIdentifier}" />
                            <Button Grid.Row="0" Grid.Column="2" Content="Generate" Command="{Binding GenerateCustomIdentifierCommand}" IsEnabled="{Binding Config.UseCustomIdentifier}" HorizontalAlignment="Left" Width="80"  BorderBrush="Transparent" Background="#FF494949" Foreground="#FFD6D7D8"/>
                            <TextBlock Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" TextWrapping="Wrap" Text="NB! Change this when cloning machines!" Style="{StaticResource ConfigDescription}" />
                        </Grid>
                    </StackPanel>
                </Expander>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</UserControl>
