<UserControl x:Class="Virinco.WATS.Client.Configurator.Pages.TSSupportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:dep="clr-namespace:Virinco.WATS.Client.Configurator.SupportFiles"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:converter="clr-namespace:Virinco.WATS.Client.Configurator.Helpers"
             xmlns:res="clr-namespace:Virinco.WATS.Client.Configurator.Resources"
             mc:Ignorable="d" 
             d:DesignHeight="314" d:DesignWidth="426">
    <UserControl.Resources>
        <!--<ObjectDataProvider ObjectType="{x:Type dep:Deploy}" MethodName="GetDeploymentConfigurations" x:Key="products">
            <ObjectDataProvider.MethodParameters>
                <system:Boolean>true</system:Boolean>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>-->
        <converter:NumberToVisibilityConverter x:Key="ntvc" />
        <converter:BoolToVisibilityConverter x:Key="btvc" />
    </UserControl.Resources>
    <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
        <TextBlock Margin="3" Text="{x:Static res:Strings.Cfg_TDM_TS_Heading}" Style="{StaticResource ConfigPageHeader}" />
        <TextBlock Text="{x:Static res:Strings.Cfg_TDM_TS_Description}" TextWrapping="Wrap" Style="{StaticResource ConfigDescription}" Margin="3,0,30,0" />
        <ListView ItemsSource="{Binding Products, UpdateSourceTrigger=PropertyChanged}" Margin="3,3,3,3" BorderThickness="0" Background="#282828" SelectionChanged="ListView_SelectionChanged">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <WrapPanel Margin="3">
                        <TextBlock Text="{Binding Path=Name, Mode=OneWay}" Width="143" Margin="0,4,0,0" Style="{StaticResource SectionLabel}"/>
                        <Border Margin="1" BorderThickness="1" BorderBrush="Black">
                            <StackPanel Orientation="Horizontal">
                                <WrapPanel Background="#0BAA00" Visibility="{Binding Path=ReinstallVisibility}">
                                    <TextBlock Text="{x:Static res:Strings.Cfg_TDM_TS_Configured}" HorizontalAlignment="Center" VerticalAlignment="Center" Width="125" Margin="2,3,2,2" Foreground="#FFD6D7D8" />
                                </WrapPanel>
                                <WrapPanel Background="#DB0000" Visibility="{Binding Path=InstallVisibility}">
                                    <TextBlock Text="{x:Static res:Strings.Cfg_TDM_TS_UnConfigured}" HorizontalAlignment="Center" VerticalAlignment="Center" Width="125" Margin="2,3,2,2" Foreground="#FFD6D7D8" />
                                </WrapPanel>
                            </StackPanel>
                        </Border>
                        <Button Content="Install" Visibility="{Binding Path=InstallVisibility}" Width="80" Margin="5,0,0,0" Click="btnInstall_Click" />
                        <Button Content="ReInstall" Visibility="{Binding Path=ReinstallVisibility}" Width="80" Margin="5,0,0,0" Click="btnInstall_Click" />
                        <Button Content="Uninstall" IsEnabled="{Binding Path=IsDeployed}" Width="80" Margin="5,0,0,0" Click="btnUninstall_Click" />
                    </WrapPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Grid Visibility="{Binding Path=Products.Count, Converter={StaticResource ntvc}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="34"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Image Source="sign_warning.png" Stretch="Fill" Width="24" Height="24" Margin="5,5"/>

            <TextBlock Visibility="{Binding HasDeploymentPackages, Converter={StaticResource btvc}, ConverterParameter=Inverse}" Text="{x:Static res:Strings.Cfg_TDM_TS_NotFound}" TextWrapping="Wrap" Style="{StaticResource WarningDescription}" Margin="3,3,30,0" Grid.Column="1" />
            <TextBlock Visibility="{Binding HasDeploymentPackages, Converter={StaticResource btvc}}" Text="{x:Static res:Strings.Cfg_TDM_TS_DeploymentPackageFound}" TextWrapping="Wrap" Style="{StaticResource WarningDescription}" Margin="3,3,30,0" Grid.Column="1" />
        </Grid>
            <!--
            <Button Name="btnUnInstallAll" Content="Uninstall All" Width="70" Click="btnUnInstallAll_Click" Height="23" VerticalAlignment="Center"  HorizontalAlignment="Center" Margin="0,0,0,0"/>
            <Button Name="btnInstallAll" Content="Install All" Width="70" Click="btnInstallAll_Click" Height="23" VerticalAlignment="Center"  HorizontalAlignment="Center" Margin="0,0,0,0" />
        -->
    </StackPanel>
</UserControl>
