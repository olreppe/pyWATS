<Window x:Class="Virinco.WATS.Client.StatusMonitor.View.ClientMonitor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WATS Client Monitor" 
        Icon="/Virinco.WATS.Client.StatusMonitor;component/Images/RebrandIcons/favicon-196x196.png"
        SizeToContent="Height" Width="500"  
        AllowsTransparency="False" ResizeMode="NoResize" WindowStartupLocation="CenterScreen"
        Background="#282828"
        DataContext="{Binding Status, Source={StaticResource Locator}}">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Skins/DefaultSkin.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <DockPanel Margin="15,5,15,5">
        <Grid DockPanel.Dock="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" MinHeight="25" />
                <RowDefinition Height="Auto" MinHeight="25" />
                <RowDefinition Height="Auto" MinHeight="25" />
                <RowDefinition Height="Auto" MinHeight="25" />

            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="5" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="WATS Client Status" />
            <TextBlock Grid.Row="1" Grid.Column="0" Text="WATS Client Service" />
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Reports pending" />
            <TextBlock Grid.Row="3" Grid.Column="0" Text="Reports created" />

            <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding Path=ServiceAPIStatus}"  HorizontalAlignment="Right" TextWrapping="Wrap" />
            <TextBlock Grid.Row="1" Grid.Column="2" Text="{Binding Path=ServiceStatus}"  HorizontalAlignment="Right" TextWrapping="Wrap" />
            <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding Path=PendingReports, StringFormat=#\{0\}}" ToolTip="Reports pending for upload."  HorizontalAlignment="Right" TextWrapping="Wrap" />
            <TextBlock Grid.Row="3" Grid.Column="2"  HorizontalAlignment="Right" TextWrapping="Wrap">
                <TextBlock.Text>
                    <MultiBinding StringFormat="#{0} ({1}/{2})" FallbackValue="#0 (0/0)">
                        <Binding Path="ReportsSinceStartup" TargetNullValue="0" FallbackValue="0"/>
                        <Binding Path="UUTReportsSinceStartup" TargetNullValue="0" FallbackValue="0"/>
                        <Binding Path="UURReportsSinceStartup" TargetNullValue="0" FallbackValue="0"/>
                    </MultiBinding>
                </TextBlock.Text>
                <TextBlock.ToolTip>
                    <ToolTip DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}" Padding="2 5 5 0">
                        <TextBlock Foreground="#666">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="Reports created since startup. {0} UUTs, {1} UURs" FallbackValue="Reports created since startup. 0 UUTs, 0 UURs">
                                    <Binding Path="UUTReportsSinceStartup" TargetNullValue="0" FallbackValue="0"/>
                                    <Binding Path="UURReportsSinceStartup" TargetNullValue="0" FallbackValue="0"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </ToolTip>
                </TextBlock.ToolTip>
            </TextBlock>
        </Grid>

        <Grid DockPanel.Dock="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" MinHeight="25" />
                <RowDefinition Height="25" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="5" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Connected to:" />
            <TextBlock Grid.Row="0" Grid.Column="2" TextWrapping="NoWrap">
                <Hyperlink NavigateUri="{Binding Path=url, Mode=OneWay}" RequestNavigate="Hyperlink_RequestNavigate">
                    <Run Text="{Binding Path=url, Mode=OneWay}"/>
                </Hyperlink>
            </TextBlock>
        </Grid>

        <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" Margin="5,0">
            <TextBlock Text="{Binding CopyrightText, Mode=OneTime}" Style="{StaticResource FooterText}" />
            <TextBlock Text="|" Margin="15,0" Style="{StaticResource FooterText}"/>
            <TextBlock>
                <Hyperlink NavigateUri="https://WATS.com" RequestNavigate="Hyperlink_RequestNavigate">
                    WATS.com
                </Hyperlink>
            </TextBlock>
            <TextBlock Text="|" Margin="15,0" Style="{StaticResource FooterText}"/>
            <TextBlock Text="{Binding ClientVersion}" Style="{StaticResource FooterText}"/>
            <TextBlock Text="|" Margin="15,0" Style="{StaticResource FooterText}"/>
            <TextBlock>
                <Hyperlink Click="About_Click">
                    About
                </Hyperlink>
            </TextBlock>
        </StackPanel>

        <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" Margin="0,5">
            <Button Content="Generate Support Log" Click="GenerateSupportLog_Click" Margin="5,0" Padding="3" Style="{StaticResource LightButton}"/>
            <Button Content="Enable Verbose Logging" Click="EnableVerboseLogging_Click" Margin="5,0" Padding="3" Style="{StaticResource LightButton}"/>
        </StackPanel>
    </DockPanel>
</Window>
