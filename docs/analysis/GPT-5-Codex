# pyWATS Report Model Review (Assistant Recommendations)

## 1. Layout & Packaging
- Split shared abstractions (`wats_base`, `report`, `misc_info`, assets) into `models/report/core`.
- Group UUT and UUR specifics in folders with public `__all__` to avoid star imports.
- Move construction helpers (e.g., `create_uut_report`, builder logic) into dedicated service modules to keep data models declarative.

## 2. Validation Strategy
- Centralize context/default injection in `WATSBase`; document constraints and guard against silent mutation by enforcing explicit opt-in via context keys.
- Replace manual validation methods (e.g., `MiscUURInfo.validate_value`, `UURReport.validate_uur`) with `@field_validator` / `@model_validator(mode="after")` so Pydantic surfaces errors uniformly.
- Standardize attachment/failure/business rules in reusable validators shared by UUT/UUR models to remove duplicated loops.

## 3. Type & Error Safety
- Introduce enums (`ReportType`, `ReportResult`, `StepType`, `StepGroup`) and use them instead of regex-validated strings; export conversion helpers at API boundaries.
- Normalize UUID handling with `field_serializer` / `field_validator` pairs, keeping internal state as `UUID`.
- Audit `Optional` usage: mark required business fields non-nullable, fallback to empty collections via `default_factory`, and document when `None` is valid.
- Add typed accessors (`@property` or Pydantic PrivateAttr) for private lists in `UURReport` to prevent direct mutation.

## 4. Testing & Tooling
- Add focused model-validation tests exercising enum enforcement, default injection, and failure trees.
- Enable mypy (strict optional) on `models/report` to highlight unsafe patterns; extend `pyproject.toml` with plugin configuration.